{"version":3,"sources":["webpack:///./js/FetchApi.js","webpack:///./js/PageSlider.js","webpack:///./js/storage.js","webpack:///./js/details.js","webpack:///./js/input.js","webpack:///./index.js","webpack:///./templates/postersViewerTemplate.hbs","webpack:///./modalwindow.js","webpack:///./templates/details.hbs","webpack:///./templates/pageSliderTemplate.hbs"],"names":["FetchAPI","this","API_KEY","noMatchMessage","getGenres","fetch","then","j","json","genres","getPopular","page","popularAPI","data","getDataObject","getByName","name","nameArr","split","query","length","join","getByNameAPI","results","awaitGenres","newData","map","el","poster_path","title","genre","genre_ids","reduce","acc","id","filmGenre","filter","push","release_year","release_date","vote_average","overview","original_title","popularity","vote_count","includes","document","querySelector","PageSlider","containerId","refs","container","_totalPages","addEventListener","handlePageSlider","bind","fetchApi","fetchAPI","set","totalPages","currentPage","show","makeRefs","update","e","target","nodeName","handleBtn","handlePage","Number","current","textContent","targetPage","dataset","move","interLeft","interRight","innerHTML","pageSliderTemplate","hide","viewer","first","secondBefore","firstBefore","firstAfter","secondAfter","last","num","total","passPageNum","movies","pageViewerTemplate","value","getFilmsData","key","serializedState","localStorage","getItem","undefined","JSON","parse","err","console","error","setfilmsData","filmsObjArr","stringify","setItem","QUOTA_EXCEEDED_ERR","alert","isFilmInLS","filmObj","filmsData","film","find","elem","indexOf","addToMyLib","deleteFilm","toDelIdx","splice","removeItem","mainPageSlider","buildDetails","previousPage","currentPageNumber","markup","detailsTemplate","header","classList","remove","add","details","watchedBtn","queueBtn","returnBtn","isActive","tagName","window","scrollTo","top","enableBtn","disableBtn","handleMovieClick","_","require","errorString","homeButton","libraryButton","myLibraryBtns","inputContainer","watchedTab","queryTab","queryBtnOnWatchedTab","watchedBtnOnQueryTab","logo","handleWatcheBtn","moviesArr","handleHomeButtonClick","searchFormInputHandler","getMoviesArray","inputChecking","input","removeEventListener","inputLine","debounced","debounce","search","popular","ls","preventDefault","closest","imgUrl","src","moveiObj","prevPage","fetchPageNum","Handlebars","module","exports","template","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","modal","modalOverlay","closeButton","style","display","toggle"],"mappings":"ixBAAqBA,E,WACnB,aACEC,KAAKC,QAAU,mCACfD,KAAKE,eACH,2E,2BAGEC,U,4CAAN,yGAEI,wGAFJ,SAGuBC,MADnB,yGACsCC,MAAK,SAACC,GAAD,OAAOA,EAAEC,UAHxD,cAGQC,EAHR,yBAISA,GAJT,2C,uDAOMC,W,4CAAN,WAAiBC,GAAjB,wGAAiBA,MAAO,GAChBC,EADR,sDAC2EX,KAAKC,QADhF,wBAC+GS,EAD/G,SAEqBN,MAAMO,GAAYN,MAAK,SAACC,GAAD,OAAOA,EAAEC,UAFrD,cAEQK,EAFR,yBAGSZ,KAAKa,cAAcD,IAH5B,gD,uDAMME,U,4CAAN,WAAgBC,GAAhB,mGACQC,EAAUD,EAAKE,MAAM,KACrBC,EAAQF,EAAQG,OAAS,EAAIH,EAAQI,KAAK,KAAOJ,EAAQ,GACzDK,EAHR,qDAG4ErB,KAAKC,QAHjF,UAGkGiB,EAHlG,SAIqBd,MAAMiB,GAAchB,MAAK,SAACC,GAAD,OAAOA,EAAEC,UAJvD,UAK8B,KADtBK,EAJR,QAKWU,QAAQH,OALnB,0CAMWnB,KAAKE,gBANhB,iCAQWF,KAAKa,cAAcD,IAR9B,iD,wDAYMC,c,4CAAN,WAAoBD,GAApB,0GAC4BZ,KAAKG,YADjC,cACQoB,EADR,OAEQf,EAASe,EAAYf,OACrBgB,EAAUZ,EAAKU,QAClBG,KAAI,SAACC,GACJ,MAAO,CACLC,YAAa,mCAAmCD,EAAGC,YACnDC,MAAOF,EAAGE,MACVC,MAAOH,EAAGI,UAAUC,QAAO,SAACC,EAAKC,GAC/B,IAAMC,EAAY1B,EAAO2B,QAAO,SAACN,GAAD,OAAWA,EAAMI,KAAOA,KAAI,GAE5D,OADAD,EAAII,KAAKF,EAAUnB,MACZiB,IACN,IACHK,aAAcX,EAAGY,aAAarB,MAAM,KAAK,GACzCsB,aAAcb,EAAGa,aACjBC,SAAUd,EAAGc,SACbC,eAAgBf,EAAGe,eACnBC,WAAYhB,EAAGgB,WACfC,WAAYjB,EAAGiB,WACfV,GAAIP,EAAGO,OAGVE,QAAO,SAACT,GAAD,OAASA,EAAGC,YAAYiB,SAAS,WAtB7C,kBAuBSpB,GAvBT,gD,iOC7BaqB,SAASC,cAAc,kBAAtC,IAKqBC,E,WACnB,WAAYC,QAA4B,IAA5BA,MAAc,cACxBhD,KAAKiD,KAAO,CACVC,UAAWL,SAASC,cAAT,IAA2BE,IAExChD,KAAKmD,YAAc,KACnBnD,KAAKiD,KAAKC,UAAUE,iBAClB,QACApD,KAAKqD,iBAAiBC,KAAKtD,OAE7BA,KAAKuD,SAAW,IAAIC,E,iCAWtBC,IAAA,SAAIC,EAAYC,QAAiB,IAAjBA,MAAc,GAC5B3D,KAAK0D,WAAaA,EAClB1D,KAAK4D,OACL5D,KAAK6D,SAAS7D,KAAKiD,KAAKC,WACxBlD,KAAK8D,OAAOH,I,EAGdN,iBAAA,SAAiBU,GACf,OAAQA,EAAEC,OAAOC,UACf,IAAK,SACHjE,KAAKkE,UAAUH,GACf,MACF,IAAK,OACH/D,KAAKmE,WAAWJ,GAChB,MACF,QACE,S,EAING,UAAA,SAAUH,GACR,IAAMJ,EAAcS,OAAOpE,KAAKiD,KAAKoB,QAAQC,aACvCC,EACsB,SAA1BR,EAAEC,OAAOQ,QAAQC,KACbd,EAAc,EACZA,EAAc,EACdA,EACFA,EAAc3D,KAAK0D,WACnBC,EAAc,EACdA,EACFA,IAAgBY,GAGpBvE,KAAK8D,OAAOS,I,EAGdJ,WAAA,SAAWJ,GACLA,EAAEC,SAAWhE,KAAKiD,KAAKoB,SAGvBN,EAAEC,SAAWhE,KAAKiD,KAAKyB,WAGvBX,EAAEC,SAAWhE,KAAKiD,KAAK0B,YAG3B3E,KAAK8D,OAAOM,OAAOL,EAAEC,OAAOM,e,EAG9BV,KAAA,WACE5D,KAAKiD,KAAKC,UAAU0B,UAAYC,O,EAGlCC,KAAA,WACE9E,KAAKiD,KAAKC,UAAU0B,UAAY,I,EAGlCf,SAAA,SAASX,GACPlD,KAAKiD,KAAO,CACVC,UAAWA,EACX6B,OAAQlC,SAASC,cAAc,kBAC/BkC,MAAO9B,EAAUJ,cAAc,sBAC/B4B,UAAWxB,EAAUJ,cAAc,0BACnCmC,aAAc/B,EAAUJ,cAAc,6BACtCoC,YAAahC,EAAUJ,cAAc,4BACrCuB,QAASnB,EAAUJ,cAAc,wBACjCqC,WAAYjC,EAAUJ,cAAc,2BACpCsC,YAAalC,EAAUJ,cAAc,4BACrC6B,WAAYzB,EAAUJ,cAAc,2BACpCuC,KAAMnC,EAAUJ,cAAc,uB,EAIlCgB,OAAA,SAAOwB,GACL,IAAMC,EAAQvF,KAAK0D,WACnB1D,KAAKiD,KAAK+B,MAAMV,YAAcgB,EAAM,EAAI,EAAI,KAC5CtF,KAAKiD,KAAKyB,UAAUJ,YAAcgB,EAAM,EAAI,MAAQ,KACpDtF,KAAKiD,KAAKgC,aAAaX,YAAcgB,EAAM,EAAIA,EAAM,EAAI,KACzDtF,KAAKiD,KAAKiC,YAAYZ,YAAcgB,EAAM,EAAIA,EAAM,EAAI,KACxDtF,KAAKiD,KAAKoB,QAAQC,YAAcgB,EAChCtF,KAAKiD,KAAKkC,WAAWb,YAAciB,EAAQD,EAAM,EAAIA,EAAM,EAAI,KAC/DtF,KAAKiD,KAAKmC,YAAYd,YAAciB,EAAQD,EAAM,EAAIA,EAAM,EAAI,KAChEtF,KAAKiD,KAAK0B,WAAWL,YAAciB,EAAQD,EAAM,EAAI,MAAQ,KAC7DtF,KAAKiD,KAAKoC,KAAKf,YAAciB,EAAQD,EAAM,EAAIC,EAAQ,KACvDvF,KAAKwF,YAAYF,I,EAGnBE,YAAA,SAAYF,GAAK,WACftF,KAAKuD,SAAS9C,WAAW6E,GAAKjF,MAAK,SAACoF,GAClC,EAAKxC,KAAK8B,OAAOH,UAAYc,IAAmBD,O,uCAjGrCE,GACb,OAAQ3F,KAAKmD,YAAcwC,G,eAI3B,OAAO3F,KAAKmD,iB,wECvBhB,SAASyC,EAAaC,GACpB,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAG7C,OADsB,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,GAEpD,MAAOM,GACPC,QAAQC,MAAM,kCAAmCF,IAMrD,IAAMG,EAAe,SAACV,EAAKW,GACzB,IACE,IAAMV,EAAkBI,KAAKO,UAAUD,GACvCT,aAAaW,QAAQb,EAAKC,GAC1B,MAAOM,GACPC,QAAQC,MAAM,uBAAwBF,GAClCA,GAAOO,oBACTC,MAAM,oBAMZ,SAASC,EAAWhB,EAAKiB,GACvB,IAAIC,EAAYnB,EAAaC,IAAQ,GAC/BmB,EAAOD,EAAUE,MACrB,SAACC,GAAD,OAAUA,EAAKvF,cAAgBmF,EAAQnF,eAGzC,QAAIqF,GAAaD,EAAUI,QAAQH,GAcrC,SAASI,EAAWvB,EAAKiB,GAEvB,IAAIC,EAAYnB,EAAaC,IAAQ,IAKJ,IAA7BgB,EAAWhB,EAAKiB,KAElBC,EAAU3E,KAAK0E,GACfP,EAAaV,EAAKkB,IAkCtB,SAASM,EAAWxB,EAAKiB,GACvB,IAAMQ,EAAWT,EAAWhB,EAAKiB,GAE7BC,EAAYnB,EAAaC,GAI7BkB,EAAUQ,OAAOD,EAAU,GAE3BvB,aAAayB,WAAW3B,GAGxBU,EAAaV,EAAKkB,GCtGpB,IAAMhC,EAASlC,SAASC,cAAc,kBAGhC2E,EAAiB,IAAI1E,EAEZ,SAAS2E,EAAa9G,EAAM+G,EAAcC,GAEvD,IAAMC,EAASC,IAAgBlH,GAC/BmH,EAAOC,UAAUC,OAAO,iBACxBF,EAAOC,UAAUC,OAAO,iBACxBF,EAAOC,UAAUE,IAAI,iBACrBnD,EAAOH,UAAYiD,EAEnB,IAAM5E,EAAO,CAEXkF,QAASpD,EAAOjC,cAAc,YAE9BsF,WAAYrD,EAAOjC,cAAc,YAEjCuF,SAAUtD,EAAOjC,cAAc,UAE/BwF,UAAWvD,EAAOjC,cAAc,aAGE,IAAhC+D,EAAW,UAAWjG,KACxBqC,EAAKmF,WAAWG,UAAW,EAC3BtF,EAAKmF,WAAWJ,UAAUE,IAAI,UAC9BjF,EAAKmF,WAAW9D,YAAc,wBAEE,IAA9BuC,EAAW,QAASjG,KACtBqC,EAAKoF,SAASE,UAAW,EACzBtF,EAAKoF,SAASL,UAAUE,IAAI,UAC5BjF,EAAKoF,SAAS/D,YAAc,qBAI9BrB,EAAKkF,QAAQ/E,iBAAiB,SAG9B,SAAmBW,GAEjB,GAAyB,WAArBA,EAAEC,OAAOwE,QACX,OAIEzE,EAAEC,SAAWf,EAAKqF,YAEpBvD,EAAOH,UAAY+C,EAKnBI,EAAOC,UAAUE,IAAI,iBACrBH,EAAOC,UAAUC,OAAO,iBACxBF,EAAOC,UAAUC,OAAO,iBACpBL,IACFH,EAAehE,IAAI,GAAImE,GACvBa,OAAOC,SAASC,OAKpB,IAAK5E,EAAEC,OAAOuE,SAEZ,YASF,SAAmBxE,GAMjB,GAJAA,EAAEC,OAAOuE,UAAW,EAEpBxE,EAAEC,OAAOgE,UAAUE,IAAI,UAEnBnE,EAAEC,SAAWf,EAAKmF,WAGpB,OAFAhB,EAAW,UAAWxG,QACtBmD,EAAEC,OAAOM,YAAc,uBAIzB,GAAIP,EAAEC,SAAWf,EAAKoF,SAGpB,OAFAjB,EAAW,QAASxG,QACpBmD,EAAEC,OAAOM,YAAc,qBAxBzBsE,CAAU7E,GAIZ,GAAIA,EAAEC,OAAOuE,SAEX,YAyBF,WAOE,GALAxE,EAAEC,OAAOuE,UAAW,EAEpBxE,EAAEC,OAAOgE,UAAUC,OAAO,UAGtBlE,EAAEC,SAAWf,EAAKmF,WAIpB,OAHAf,EAAW,UAAWzG,QACtBmD,EAAEC,OAAOM,YAAc,kBAKzB,GAAIP,EAAEC,SAAWf,EAAKoF,SAGpB,OAFAhB,EAAW,QAASzG,QACpBmD,EAAEC,OAAOM,YAAc,gBA1CzBuE,M,4TClEN,IAAM9D,EAASlC,SAASC,cAAc,kBACtCiC,EAAO3B,iBAAiB,QAAS0F,GAEjC,IAAMC,EAAIC,EAAQ,QAGZC,GADS,IAAIlJ,EACC8C,SAASC,cAAc,2BACrCoG,EAAarG,SAASC,cAAc,gBACpCqG,EAAgBtG,SAASC,cAAc,mBACvCsG,EAAgBvG,SAASC,cAAc,yBACvCuG,EAAiBxG,SAASC,cAAc,wBACxCwG,EAAazG,SAASC,cAAc,kCACpCyG,EAAW1G,SAASC,cAAc,iCAElC0G,EAAuB3G,SAASC,cAAc,wBAC9C2G,EAAuB5G,SAASC,cAAc,uBAC9C4G,EAAO7G,SAASC,cAAc,iBAqBpC,SAAS6G,IACPJ,EAASvB,UAAUE,IAAI,OACvBoB,EAAWtB,UAAUC,OAAO,OAE5B,IAAM2B,EAAYhE,EAAa,WAC/Bb,EAAOH,UAAYc,IAAmBkE,GACtC7E,EAAO3B,iBACL,QACA0F,EAAiBxF,KAAK,MAAM,EAAO,GAAI,YAGzCyB,EAAOH,UAAYc,IAAmBkE,GAMxC,SAASC,IAIPV,EAAcnB,UAAUC,OAAO,yBAC/BiB,EAAWlB,UAAUE,IAAI,yBACzBH,EAAOC,UAAUE,IAAI,iBACrBH,EAAOC,UAAUC,OAAO,iBACxBF,EAAOC,UAAUC,OAAO,iBACxBoB,EAAerB,UAAUC,OAAO,OAChCmB,EAAcpB,UAAUE,IAAI,OAC5BqB,EAASvB,UAAUE,IAAI,OACvBoB,EAAWtB,UAAUE,IAAI,OACzBT,EAAehE,IAAI,IACnBsB,EAAO3B,iBAAiB,QAAS0F,G,SA4CpBgB,E,mFAAf,WAAsC/F,GAAtC,2FACQ4B,EAAQ5B,EAAEC,OAAO2B,OADzB,uBAGIZ,EAAO3B,iBACL,QACA0F,EAAiBxF,KAAK,MAAM,EAAOqC,EAAO,KALhD,SAQyBoE,GAAe,EAAOpE,GAR/C,OASIqE,EATJ,QAUIjG,EAAEC,OAAO2B,MAAQ,GAVrB,4C,sBAcA,SAASqE,EAAcC,GACA,iBAAVA,GAIXxC,EAAe3C,OACfC,EAAOH,UAAYc,IAAmBuE,GACtClF,EAAOmF,oBAAoB,QAASpB,IALlCG,EAAY3E,YAAc2F,EA9G9BT,EAAqBpG,iBAAiB,SAGtC,WACEmG,EAASvB,UAAUC,OAAO,OAC1BqB,EAAWtB,UAAUE,IAAI,OACzB,IAAMtH,EAAOgF,EAAa,SAEpBgE,EAAYhE,EAAa,SAC/Bb,EAAOH,UAAYc,IAAmBkE,GACtC7E,EAAO3B,iBACL,QACA0F,EAAiBxF,KAAK,MAAM,EAAO,GAAI,UAGzCyB,EAAOH,UAAYc,IAAmBkE,GAEtC7E,EAAOH,UAAYc,IAAmB9E,MAhBxC6I,EAAqBrG,iBAAiB,QAASuG,GAgC/CT,EAAW9F,iBAAiB,QAASyG,GACrCH,EAAKtG,iBAAiB,QAASyG,GAmB/BV,EAAc/F,iBAAiB,SAC/B,WAIE2B,EAAOmF,oBAAoB,QAASpB,GAEpCI,EAAWlB,UAAUC,OAAO,yBAC5BkB,EAAcnB,UAAUE,IAAI,yBAC5BT,EAAe3C,OACfiD,EAAOC,UAAUC,OAAO,iBACxBF,EAAOC,UAAUE,IAAI,iBACrBH,EAAOC,UAAUC,OAAO,iBACxBoB,EAAerB,UAAUE,IAAI,OAC7BkB,EAAcpB,UAAUC,OAAO,OAC/B0B,O,IAqBMQ,EAEAC,E,sUAFAD,EAAYtH,SAASC,cAAc,oBAEnCsH,EAAYrB,EAAEsB,SAASP,EAAwB,MACrDK,EAAU/G,iBAAiB,QAASgH,GC3GtC3C,EAAehE,IAAI,IACZ,IAAMsE,EAASlF,SAASC,cAAc,WAEvCiC,EAASlC,SAASC,cAAc,kBAChCwH,EAAS,IAAI9G,EAEZ,SAAesF,EAAtB,kC,iDAAO,WAAgC/E,EAAGwG,EAAgBxJ,EAAMyJ,GAAzD,0GAAmCD,OAAU,KAEzC,IAANxG,GAA6B,iBAAPyG,IAChB,IAANzG,IAAyB,YAAThD,GAA+B,UAATA,MAEtCgD,GADD,EACyB,CAACyG,EAAIzG,EAAGwG,EAASxJ,IAD1C,GACIwJ,EADJ,KACaxJ,EADb,KACmByJ,EADnB,MAIuB,QAArBzG,EAAEC,OAAOwE,SAA0C,OAArBzE,EAAEC,OAAOwE,QARtC,oDAYLzE,EAAE0G,kBAEE1G,EAAEC,OAAO0G,QAAQ,KAdhB,oBAeGC,EAAS5G,EAAEC,OAAO0G,QAAQ,KAAK5H,cAAc,mBAAmB8H,IAGjEJ,EAlBF,kCAmBcT,EAAeQ,EAASxJ,EAAMyJ,GAnB5C,QAmBD/E,EAnBC,+BAoBe,YAAP+E,GAA2B,UAAPA,IAC7B/E,EAASsE,EAAeQ,EAASxJ,EAAMyJ,IArBtC,WA0BGxD,EAAOvB,EAAOtD,QAAO,SAAC0I,GAAD,OAAcA,EAASlJ,aAAegJ,KAAQ,GA1BtE,wDA8BGG,EAAW/F,EAAOH,WACXhC,SAAS,WA/BnB,mDAkCH8E,EAAaV,EAAM8D,GAlChB,6C,sBAsCA,SAASf,EAAeQ,EAAgBxJ,EAAWyJ,GACxD,QADiE,IAApCD,OAAU,QAA0B,IAApBxJ,MAAO,SAAa,IAATyJ,MAAK,IACzDD,EAAS,CACX,IAAMQ,EAAe3G,OAAOqD,EAAexE,KAAKoB,QAAQC,aACxD,OAAOgG,EAAO7J,WAAWsK,GAE3B,MAAa,KAAThK,EACKuJ,EAAOxJ,UAAUC,GAEf,KAAPyJ,EACiB5E,EAAa4E,GAI3B,O,qBClET,IAAIQ,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASjI,EAAUkI,EAAOC,EAAQC,EAAS1K,GAC5G,IAAI2K,EAAQC,EAAiB,MAAVJ,EAAiBA,EAAUlI,EAAUuI,aAAe,GAAKC,EAAOxI,EAAUyI,MAAMC,cAAeC,EAAO,WAAYC,EAAO5I,EAAU6I,iBAAkBC,EAAiB9I,EAAU8I,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,+HACHJ,SAASP,EAAiI,OAAvHA,EAASS,EAAeX,EAAQ,iBAA6B,MAAVD,EAAiBY,EAAeZ,EAAO,eAAiBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACrU,UACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACnT,mDACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACnT,0GACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACnT,gHACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeX,EAAQ,kBAA8B,MAAVD,EAAiBY,EAAeZ,EAAO,gBAAkBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GAC1U,0EACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeX,EAAQ,kBAA8B,MAAVD,EAAiBY,EAAeZ,EAAO,gBAAkBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GAC1U,+DACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASrI,EAAUkI,EAAOC,EAAQC,EAAS1K,GAC1E,IAAI2L,EAON,MAAO,+BACsR,OAAvRA,GARyBrJ,EAAU8I,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAMQb,EAAQ,QAAQiB,KAAe,MAAVlB,EAAiBA,EAAUlI,EAAUuI,aAAe,GAAIL,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKlI,EAAUsJ,QAAQ,EAAG5L,EAAM,GAAG,QAAUsC,EAAUuJ,KAAK,KAAO7L,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,QAAkB2L,EAAS,IACzS,SACJ,SAAU,K,mBClCZ,IAAIG,EAAQ7J,SAASC,cAAc,UACjC6J,EAAe9J,SAASC,cAAc,kBACtC8J,EAAc/J,SAASC,cAAc,wBACxBD,SAASC,cAAc,eAE3BM,iBAAiB,SAAS,WACnCsJ,EAAMG,MAAMC,QAAU,eACtBH,EAAaE,MAAMC,QAAU,eAC7BJ,EAAM1E,UAAU+E,OAAO,UACvBJ,EAAa3E,UAAU+E,OAAO,aAEhCH,EAAYxJ,iBAAiB,SAAS,WACpCsJ,EAAMG,MAAMC,QAAU,OACtBH,EAAaE,MAAMC,QAAU,OAC7BJ,EAAM1E,UAAU+E,OAAO,UACvBJ,EAAa3E,UAAU+E,OAAO,c,qBCfhC,IAAI/B,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASjI,EAAUkI,EAAOC,EAAQC,EAAS1K,GACzI,IAAI2K,EAAQC,EAAiB,MAAVJ,EAAiBA,EAAUlI,EAAUuI,aAAe,GAAKC,EAAOxI,EAAUyI,MAAMC,cAAeC,EAAO,WAAYC,EAAO5I,EAAU6I,iBAAkBC,EAAiB9I,EAAU8I,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,0LACHJ,SAASP,EAAiI,OAAvHA,EAASS,EAAeX,EAAQ,iBAA6B,MAAVD,EAAiBY,EAAeZ,EAAO,eAAiBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACrU,QACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACnT,4KACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAAS2K,GACnT,wXACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeX,EAAQ,kBAA8B,MAAVD,EAAiBY,EAAeZ,EAAO,gBAAkBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GAC1U,yCACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeX,EAAQ,gBAA4B,MAAVD,EAAiBY,EAAeZ,EAAO,cAAgBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,KAAK,IAAM,CAAC,KAAO,GAAG,OAAS,QAAU2K,GACtU,+LACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeX,EAAQ,gBAA4B,MAAVD,EAAiBY,EAAeZ,EAAO,cAAgBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GACpU,sNACAO,SAASP,EAAuI,OAA7HA,EAASS,EAAeX,EAAQ,oBAAgC,MAAVD,EAAiBY,EAAeZ,EAAO,kBAAoBA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,iBAAiB,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GAChV,+LACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeX,EAAQ,WAAuB,MAAVD,EAAiBY,EAAeZ,EAAO,SAAWA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GACrT,6MACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeX,EAAQ,cAA0B,MAAVD,EAAiBY,EAAeZ,EAAO,YAAcA,IAAmBG,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAO5K,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAAS2K,GAC9T,wPACJ,SAAU,K,qBC7BZ,IAAIP,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASjI,EAAUkI,EAAOC,EAAQC,EAAS1K,GACzI,MAAO,qsCACT,SAAU,M","file":"main.0c9e172fb6c66d79ac57.js","sourcesContent":["export default class FetchAPI {\n  constructor() {\n    this.API_KEY = \"be244f548a27d8c36fc000d6ba379c12\";\n    this.noMatchMessage =\n      \"Search result not successful. Enter the correct movie name and try again\";\n  }\n\n  async getGenres() {\n    const genrseFetch =\n      \"https://api.themoviedb.org/3/genre/movie/list?api_key=be244f548a27d8c36fc000d6ba379c12&language=en-US\";\n    const genres = await fetch(genrseFetch).then((j) => j.json());\n    return genres;\n  }\n\n  async getPopular(page = 1) {\n    const popularAPI = `https://api.themoviedb.org/3/movie/popular?api_key=${this.API_KEY}&language=en-US&page=${page}`;\n    const data = await fetch(popularAPI).then((j) => j.json());\n    return this.getDataObject(data);\n  }\n\n  async getByName(name) {\n    const nameArr = name.split(\" \");\n    const query = nameArr.length > 1 ? nameArr.join(\"+\") : nameArr[0];\n    const getByNameAPI = `https://api.themoviedb.org/3/search/movie?api_key=${this.API_KEY}&query=${query}`;\n    const data = await fetch(getByNameAPI).then((j) => j.json());\n    if (data.results.length === 0) {\n      return this.noMatchMessage;\n    } else {\n      return this.getDataObject(data);\n    }\n  }\n\n  async getDataObject(data) {\n    const awaitGenres = await this.getGenres();\n    const genres = awaitGenres.genres;\n    const newData = data.results\n      .map((el) => {\n        return {\n          poster_path: `https://image.tmdb.org/t/p/w500/${el.poster_path}`,\n          title: el.title,\n          genre: el.genre_ids.reduce((acc, id) => {\n            const filmGenre = genres.filter((genre) => genre.id === id)[0];\n            acc.push(filmGenre.name);\n            return acc;\n          }, []),\n          release_year: el.release_date.split(\"-\")[0],\n          vote_average: el.vote_average,\n          overview: el.overview,\n          original_title: el.original_title,\n          popularity: el.popularity,\n          vote_count: el.vote_count,\n          id: el.id,\n        };\n      })\n      .filter((el) => !el.poster_path.includes(\"null\"));\n    return newData;\n  }\n}\n","import pageViewerTemplate from \"../templates/postersViewerTemplate.hbs\";\r\nimport pageSliderTemplate from \"../templates/pageSliderTemplate.hbs\";\r\nimport fetchAPI from \"./FetchApi.js\";\r\nconst viewer = document.querySelector(\"#postersViewer\");\r\n\r\nimport buildDetails from \"./details\";\r\nimport { handleMovieClick } from \"../index.js\";\r\n\r\nexport default class PageSlider {\r\n  constructor(containerId = \"pageSlider\") {\r\n    this.refs = {\r\n      container: document.querySelector(`#${containerId}`),\r\n    };\r\n    this._totalPages = null;\r\n    this.refs.container.addEventListener(\r\n      \"click\",\r\n      this.handlePageSlider.bind(this)\r\n    );\r\n    this.fetchApi = new fetchAPI();\r\n  }\r\n\r\n  set totalPages(value) {\r\n    return (this._totalPages = value);\r\n  }\r\n\r\n  get totalPages() {\r\n    return this._totalPages;\r\n  }\r\n\r\n  set(totalPages, currentPage = 1) {\r\n    this.totalPages = totalPages;\r\n    this.show();\r\n    this.makeRefs(this.refs.container);\r\n    this.update(currentPage);\r\n  }\r\n\r\n  handlePageSlider(e) {\r\n    switch (e.target.nodeName) {\r\n      case \"BUTTON\":\r\n        this.handleBtn(e);\r\n        break;\r\n      case \"SPAN\":\r\n        this.handlePage(e);\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  handleBtn(e) {\r\n    const currentPage = Number(this.refs.current.textContent);\r\n    const targetPage =\r\n      e.target.dataset.move === \"left\"\r\n        ? currentPage > 1\r\n          ? currentPage - 1\r\n          : currentPage\r\n        : currentPage < this.totalPages\r\n        ? currentPage + 1\r\n        : currentPage;\r\n    if (currentPage === targetPage) {\r\n      return;\r\n    }\r\n    this.update(targetPage);\r\n  }\r\n\r\n  handlePage(e) {\r\n    if (e.target === this.refs.current) {\r\n      return;\r\n    }\r\n    if (e.target === this.refs.interLeft) {\r\n      return;\r\n    }\r\n    if (e.target === this.refs.interRight) {\r\n      return;\r\n    }\r\n    this.update(Number(e.target.textContent));\r\n  }\r\n\r\n  show() {\r\n    this.refs.container.innerHTML = pageSliderTemplate();\r\n  }\r\n\r\n  hide() {\r\n    this.refs.container.innerHTML = \"\";\r\n  }\r\n\r\n  makeRefs(container) {\r\n    this.refs = {\r\n      container: container,\r\n      viewer: document.querySelector(\"#postersViewer\"),\r\n      first: container.querySelector(\"#slider-page-first\"),\r\n      interLeft: container.querySelector(\"#slider-page-interLeft\"),\r\n      secondBefore: container.querySelector(\"#slider-page-secondBefore\"),\r\n      firstBefore: container.querySelector(\"#slider-page-firstBefore\"),\r\n      current: container.querySelector(\"#slider-page-current\"),\r\n      firstAfter: container.querySelector(\"#slider-page-firstAfter\"),\r\n      secondAfter: container.querySelector(\"#slider-page-secondAfter\"),\r\n      interRight: container.querySelector(\"#slider-page-interRight\"),\r\n      last: container.querySelector(\"#slider-page-last\"),\r\n    };\r\n  }\r\n\r\n  update(num) {\r\n    const total = this.totalPages;\r\n    this.refs.first.textContent = num > 3 ? 1 : null;\r\n    this.refs.interLeft.textContent = num > 3 ? \"...\" : null;\r\n    this.refs.secondBefore.textContent = num > 2 ? num - 2 : null;\r\n    this.refs.firstBefore.textContent = num > 1 ? num - 1 : null;\r\n    this.refs.current.textContent = num;\r\n    this.refs.firstAfter.textContent = total - num > 0 ? num + 1 : null;\r\n    this.refs.secondAfter.textContent = total - num > 1 ? num + 2 : null;\r\n    this.refs.interRight.textContent = total - num > 3 ? \"...\" : null;\r\n    this.refs.last.textContent = total - num > 3 ? total : null;\r\n    this.passPageNum(num);\r\n  }\r\n\r\n  passPageNum(num) {\r\n    this.fetchApi.getPopular(num).then((movies) => {\r\n      this.refs.viewer.innerHTML = pageViewerTemplate(movies);\r\n    });\r\n  }\r\n\r\n  // handleGalleryClick(movies, e) {\r\n  //   if (e.target.tagName === \"UL\") {\r\n  //     return;\r\n  //   }\r\n  //   e.preventDefault();\r\n  //   const imgUrl = e.target.closest(\"a\").querySelector(\".main__item-img\").src;\r\n  //   const film = movies.filter((moveiObj) => moveiObj.poster_path == imgUrl)[0];\r\n\r\n  //   this.hide();\r\n  //   const main__list = document.querySelector(\".main__list\");\r\n  //   main__list.removeEventListener(\"click\", this.handleGalleryClick);\r\n\r\n  //   const prevPage = this.refs.viewer.innerHTML;\r\n  //   const currentPageNumber = Number(this.refs.current.textContent);\r\n\r\n  //   buildDetails(film, prevPage, currentPageNumber);\r\n  // }\r\n}\r\n","// storage.js\n\n// Принимает ключ `key` по которому будет произведена выборка, получаем данные из localStorage\nfunction getFilmsData(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    const lsArray =\n      serializedState === null ? undefined : JSON.parse(serializedState);\n    return lsArray;\n  } catch (err) {\n    console.error(\"Ошибка получения данных из LS: \", err);\n  }\n}\n\n// Принимает ключ `key` и значение FilmObj(данные фильма) записываем данные в хранилище\n\nconst setfilmsData = (key, filmsObjArr) => {\n  try {\n    const serializedState = JSON.stringify(filmsObjArr);\n    localStorage.setItem(key, serializedState);\n  } catch (err) {\n    console.error(\"Ошибка записи в LS: \", err);\n    if (err == QUOTA_EXCEEDED_ERR) {\n      alert(\"Превышен лимит\");\n    }\n  }\n};\n\n//функция проверки наличия фильма в LS\nfunction isFilmInLS(key, filmObj) {\n  let filmsData = getFilmsData(key) || [];\n  const film = filmsData.find(\n    (elem) => elem.poster_path === filmObj.poster_path\n  );\n\n  if (film) return filmsData.indexOf(film);\n  else return false;\n}\n\n// функция добавление фильма передаем ключ - строка просмотренный('watched') или к просмотру('to watch')\n//Ожидаемый примерный вид объекта FilmObj на основании API\n// filmObj={\n// id: 196,\n//   poster_path: 'www.//',\n//   release_date: 1979-12-19,\n//   genre_ids: ['drama', 'detective'],\n//   title: \"Kramer vs. Kramer\",\n//   vote_average: 7.15\n// }\nfunction addToMyLib(key, filmObj) {\n  // получаем данные из Milib или создаем новый объект, если данные отсутствуют\n  let filmsData = getFilmsData(key) || [];\n\n  // + фильм\n  // console.log(filmObj.id);\n\n  if (isFilmInLS(key, filmObj) !== false) {\n  } else {\n    filmsData.push(filmObj);\n    setfilmsData(key, filmsData);\n  }\n}\n\n// содержимое MyLib  - передаем ключ - строка просмотренный('watched') или к просмотру('queue')\nfunction openMyLib(key) {\n  // получаем данные из хранилища\n  let filmsData = getFilmsData(key);\n\n  // формируем данные для вывода\n  if (filmsData !== null) {\n    // console.log(key);\n    // console.log(filmsData);\n\n    const array_size = 20;\n\n    let sliced_filmsData = [];\n\n    for (let i = 0; i < filmsData.length; i += array_size) {\n      sliced_filmsData.push(filmsData.slice(i, i + array_size));\n    }\n    // console.log(sliced_filmsData);\n    return sliced_filmsData;\n  }\n}\n\n// // очищаем Mylib\n// document.getElementById('clear').addEventListener('click', () => {\n// localStorage.removeItem(key);\n// Mylib.innerHTML = 'сleared';\n// });\n\n//Функция удаления фильма из MyLib\n\nfunction deleteFilm(key, filmObj) {\n  const toDelIdx = isFilmInLS(key, filmObj);\n  // получаем данные из Milib\n  let filmsData = getFilmsData(key);\n  // console.log(filmsData);\n\n  //удаляем из массива фильм\n  filmsData.splice(toDelIdx, 1);\n  //Чистим LS\n  localStorage.removeItem(key);\n\n  //записываем обновленный массив в LS\n  setfilmsData(key, filmsData);\n}\n\nexport { getFilmsData, openMyLib, addToMyLib, isFilmInLS, deleteFilm };\n","import detailsTemplate from \"../templates/details.hbs\";\nimport PageSlider from \"./PageSlider\";\nimport { openMyLib, addToMyLib, isFilmInLS, deleteFilm } from \"../js/storage\"; //Дима Иванов\nconst viewer = document.querySelector(\"#postersViewer\");\nimport { header } from \"../index.js\";\n\nconst mainPageSlider = new PageSlider();\n\nexport default function buildDetails(data, previousPage, currentPageNumber) {\n  //если передаётся ОДИН ОБЪЕКТ\n  const markup = detailsTemplate(data);\n  header.classList.remove(\"background-01\");\n  header.classList.remove(\"background-02\");\n  header.classList.add(\"background-03\");\n  viewer.innerHTML = markup;\n\n  const refs = {\n    //вся секция details\n    details: viewer.querySelector(\"#details\"),\n    // Кнопка добавляет в просмотренное\n    watchedBtn: viewer.querySelector(\"#watched\"),\n    //Кнопка добавляет в очередь\n    queueBtn: viewer.querySelector(\"#queue\"),\n    //Кнопка вернуться\n    returnBtn: viewer.querySelector(\"#return\"),\n  };\n  //Функционал проверки содержимого LS при загрузке страницы details - Дима Иванов\n  if (isFilmInLS(\"watched\", data) !== false) {\n    refs.watchedBtn.isActive = true;\n    refs.watchedBtn.classList.add(\"active\");\n    refs.watchedBtn.textContent = \"Remove from watched\";\n  }\n  if (isFilmInLS(\"queue\", data) !== false) {\n    refs.queueBtn.isActive = true;\n    refs.queueBtn.classList.add(\"active\");\n    refs.queueBtn.textContent = \"Remove from queue\";\n  }\n\n  // Пока не придумал, где снять этот слушатель`\n  refs.details.addEventListener(\"click\", handleBtn);\n\n  //Работа с кнопками + local storage\n  function handleBtn(e) {\n    //Определяет нажата ли именно кнопка\n    if (e.target.tagName !== \"BUTTON\") {\n      return;\n    }\n\n    //Определяет нажатие кнопки return\n    if (e.target === refs.returnBtn) {\n      // место для функции, отрисовывающей страничку home\n      viewer.innerHTML = previousPage;\n      // const slider = document.querySelector(\"#pageSlider\");\n      // slider.removeAttribute(\"style\", \"display:none\");\n      // console.log(previousPage);\n\n      header.classList.add(\"background-01\");\n      header.classList.remove(\"background-02\");\n      header.classList.remove(\"background-03\");\n      if (currentPageNumber) {\n        mainPageSlider.set(20, currentPageNumber);\n        window.scrollTo(top);\n      }\n      // refs.details.removeEventListener(\"click\", handleBtn);\n    }\n    //Кнопка включается при нажатии\n    if (!e.target.isActive) {\n      enableBtn(e);\n      return;\n    }\n    //Кнопка отключается при нажатии\n    if (e.target.isActive) {\n      disableBtn();\n      return;\n    }\n\n    //Включает кнопку: делает активной, добавляет стиль, определяет какая из кнопок включилась,добавляет в local storage\n    function enableBtn(e) {\n      //делает кнопку активной\n      e.target.isActive = true;\n      //добавляет стили\n      e.target.classList.add(\"active\");\n      //Определяет включение кнопки Watched ,здесь добавить в local storage просмотренное\n      if (e.target === refs.watchedBtn) {\n        addToMyLib(\"watched\", data); //Дима Иванов\n        e.target.textContent = \"Remove from watched\";\n        return;\n      }\n      //Определяет включение кнопки Queue,здесь добавить в local storage очередь\n      if (e.target === refs.queueBtn) {\n        addToMyLib(\"queue\", data); //Дима Иванов\n        e.target.textContent = \"Remove from queue\";\n        return;\n      }\n\n      return;\n    }\n    //Выключает кнопку: делает неактивной, убирает стили, определяет какая из кнопок выключилась, добавляет в local storage\n    function disableBtn() {\n      //делает кнопку неактивной\n      e.target.isActive = false;\n      //удаляет стили\n      e.target.classList.remove(\"active\");\n\n      //Определяет выключение кнопки Watched, здесь удалить из local storage просмотренное\n      if (e.target === refs.watchedBtn) {\n        deleteFilm(\"watched\", data);\n        e.target.textContent = \"Add to watched\";\n\n        return;\n      }\n      //Определяет выключение кнопки Queue,  здесь удалить из local storage очередь\n      if (e.target === refs.queueBtn) {\n        deleteFilm(\"queue\", data);\n        e.target.textContent = \"Add to queue\";\n        return;\n      }\n      return;\n    }\n  }\n}\n\nexport { mainPageSlider };\n","import FetchAPI from \"./FetchApi\";\nimport { mainPageSlider } from \"./details.js\";\nimport pageViewerTemplate from \"../templates/postersViewerTemplate.hbs\";\nimport { handleMovieClick, getMoviesArray, header } from \"../index.js\";\nimport { getFilmsData } from \"./storage.js\";\nimport buildDetails from \"./details.js\";\nconst viewer = document.querySelector(\"#postersViewer\");\nviewer.addEventListener(\"click\", handleMovieClick);\n\nconst _ = require(\"lodash\");\n\nconst search = new FetchAPI();\nconst errorString = document.querySelector(\".js-error-notification\");\nconst homeButton = document.querySelector(\".js-home-btn\");\nconst libraryButton = document.querySelector(\".js-library-btn\");\nconst myLibraryBtns = document.querySelector(\".header-btn-container\");\nconst inputContainer = document.querySelector(\".big-input-container\");\nconst watchedTab = document.querySelector(\".js-right-header-btn-container\");\nconst queryTab = document.querySelector(\".js-left-header-btn-container\");\n\nconst queryBtnOnWatchedTab = document.querySelector(\".js-right-header-btn\");\nconst watchedBtnOnQueryTab = document.querySelector(\".js-left-header-btn\");\nconst logo = document.querySelector(\".logo-writing\");\n\nqueryBtnOnWatchedTab.addEventListener(\"click\", handleQueryBtn);\nwatchedBtnOnQueryTab.addEventListener(\"click\", handleWatcheBtn);\n\nfunction handleQueryBtn() {\n  queryTab.classList.remove(\"d-n\");\n  watchedTab.classList.add(\"d-n\");\n  const data = getFilmsData(\"queue\");\n\n  const moviesArr = getFilmsData(\"queue\");\n  viewer.innerHTML = pageViewerTemplate(moviesArr);\n  viewer.addEventListener(\n    \"click\",\n    handleMovieClick.bind(null, false, \"\", \"queue\")\n  );\n\n  viewer.innerHTML = pageViewerTemplate(moviesArr);\n\n  viewer.innerHTML = pageViewerTemplate(data);\n}\nfunction handleWatcheBtn() {\n  queryTab.classList.add(\"d-n\");\n  watchedTab.classList.remove(\"d-n\");\n\n  const moviesArr = getFilmsData(\"watched\");\n  viewer.innerHTML = pageViewerTemplate(moviesArr);\n  viewer.addEventListener(\n    \"click\",\n    handleMovieClick.bind(null, false, \"\", \"watched\")\n  );\n\n  viewer.innerHTML = pageViewerTemplate(moviesArr);\n}\n\nhomeButton.addEventListener(\"click\", handleHomeButtonClick);\nlogo.addEventListener(\"click\", handleHomeButtonClick);\n\nfunction handleHomeButtonClick() {\n  // if (homeButton.classList.contains(\"header-top-orange-btn\")) {\n  //   return;\n  // }\n  libraryButton.classList.remove(\"header-top-orange-btn\");\n  homeButton.classList.add(\"header-top-orange-btn\");\n  header.classList.add(\"background-01\");\n  header.classList.remove(\"background-02\");\n  header.classList.remove(\"background-03\");\n  inputContainer.classList.remove(\"d-n\");\n  myLibraryBtns.classList.add(\"d-n\");\n  queryTab.classList.add(\"d-n\");\n  watchedTab.classList.add(\"d-n\");\n  mainPageSlider.set(20);\n  viewer.addEventListener(\"click\", handleMovieClick);\n}\n\nlibraryButton.addEventListener(\"click\", handleLibraryClick);\nfunction handleLibraryClick() {\n  // if (libraryButton.classList.contains(\"header-top-orange-btn\")) {\n  //   return;\n  // }\n  viewer.removeEventListener(\"click\", handleMovieClick);\n\n  homeButton.classList.remove(\"header-top-orange-btn\");\n  libraryButton.classList.add(\"header-top-orange-btn\");\n  mainPageSlider.hide();\n  header.classList.remove(\"background-01\");\n  header.classList.add(\"background-02\");\n  header.classList.remove(\"background-03\");\n  inputContainer.classList.add(\"d-n\");\n  myLibraryBtns.classList.remove(\"d-n\");\n  handleWatcheBtn();\n}\n// function renderEachImage(movies) {\n//   eventUl.addEventListener(\"click\", handleMovieClick.bind(movies));\n// }\n// function handleMovieClick(e) {\n//   if (e.target.tagName === \"UL\") {\n//     return;\n//   }\n//   e.preventDefault();\n//   const imgUrl = e.target.closest(\"a\").querySelector(\".main__item-img\").src;\n//   const film = this.filter((moveiObj) => moveiObj.poster_path == imgUrl)[0];\n\n//   const main__list = document.querySelector(\".main__list\");\n//   main__list.removeEventListener(\"click\", handleMovieClick);\n//   const prevPage = viewer.innerHTML;\n\n//   buildDetails(film, prevPage);\n// }\n\nfunction eventMaking() {\n  const inputLine = document.querySelector(\".js-search-field\");\n\n  const debounced = _.debounce(searchFormInputHandler, 1500);\n  inputLine.addEventListener(\"input\", debounced);\n}\nasync function searchFormInputHandler(e) {\n  const value = e.target.value;\n  if (value) {\n    viewer.addEventListener(\n      \"click\",\n      handleMovieClick.bind(null, false, value, \"\")\n    );\n\n    const movies = await getMoviesArray(false, value);\n    inputChecking(movies);\n    e.target.value = \"\";\n  }\n}\n\nfunction inputChecking(input) {\n  if (typeof input === \"string\") {\n    errorString.textContent = input;\n    return;\n  }\n  mainPageSlider.hide();\n  viewer.innerHTML = pageViewerTemplate(input);\n  viewer.removeEventListener(\"click\", handleMovieClick);\n}\nexport { eventMaking };\n","import \"./styles/styles.scss\";\nimport { mainPageSlider } from \"./js/details.js\";\nimport { eventMaking } from \"./js/input.js\";\nimport fetchAPI from \"./js/FetchApi.js\";\nimport { getFilmsData } from \"./js/storage.js\";\nimport buildDetails from \"./js/details.js\";\nimport \"./modalwindow.js\";\n\neventMaking();\nmainPageSlider.set(20);\nexport const header = document.querySelector(\".header\");\n\nconst viewer = document.querySelector(\"#postersViewer\");\nconst search = new fetchAPI();\n\nexport async function handleMovieClick(e, popular = true, name, ls) {\n  if (\n    (e === false && typeof ls === \"object\") ||\n    (e === false && (name === \"watched\" || name === \"queue\"))\n  ) {\n    [e, popular, name, ls] = [ls, e, popular, name];\n  }\n\n  if (e.target.tagName === \"DIV\" || e.target.tagName === \"UL\") {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.target.closest(\"a\")) {\n    const imgUrl = e.target.closest(\"a\").querySelector(\".main__item-img\").src;\n    let movies;\n\n    if (!ls) {\n      movies = await getMoviesArray(popular, name, ls);\n    } else if (ls === \"watched\" || ls === \"queue\") {\n      movies = getMoviesArray(popular, name, ls);\n      // console.log(e, popular, name, ls, movies);\n    }\n\n    // console.log(movies);\n    const film = movies.filter((moveiObj) => moveiObj.poster_path == imgUrl)[0];\n    if (!film) {\n      return;\n    }\n    const prevPage = viewer.innerHTML;\n    if (prevPage.includes(\"details\")) {\n      return;\n    }\n    buildDetails(film, prevPage);\n  }\n}\n\nexport function getMoviesArray(popular = true, name = \"\", ls = \"\") {\n  if (popular) {\n    const fetchPageNum = Number(mainPageSlider.refs.current.textContent);\n    return search.getPopular(fetchPageNum);\n  }\n  if (name !== \"\") {\n    return search.getByName(name);\n  }\n  if (ls !== \"\") {\n    const moviiesArr = getFilmsData(ls);\n\n    return moviiesArr;\n  }\n  return null;\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li class=\\\"main__item\\\">\\r\\n        <a class=\\\"main__item-link\\\" href=\\\"#\\\">\\r\\n            <img class=\\\"main__item-img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":45},\"end\":{\"line\":5,\"column\":60}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":67},\"end\":{\"line\":5,\"column\":76}}}) : helper)))\n    + \"\\\" />\\r\\n            <p class=\\\"main__item-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":40},\"end\":{\"line\":6,\"column\":49}}}) : helper)))\n    + \"</p>\\r\\n            <ul class=\\\"main__item-about-list\\\">\\r\\n                <li class=\\\"main__about-item\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre\") || (depth0 != null ? lookupProperty(depth0,\"genre\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":45},\"end\":{\"line\":8,\"column\":54}}}) : helper)))\n    + \"</li>\\r\\n                <li class=\\\"main__about-item\\\">|</li>\\r\\n                <li class=\\\"main__about-item\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"release_year\") || (depth0 != null ? lookupProperty(depth0,\"release_year\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"release_year\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":45},\"end\":{\"line\":10,\"column\":61}}}) : helper)))\n    + \"</li>\\r\\n                <li class=\\\"main__about-item main__about-vote\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_average\") || (depth0 != null ? lookupProperty(depth0,\"vote_average\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_average\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":62},\"end\":{\"line\":11,\"column\":78}}}) : helper)))\n    + \"</li>\\r\\n            </ul>\\r\\n        </a>\\r\\n    </li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<ul class=\\\"main__list\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":15,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</ul>\";\n},\"useData\":true});","let modal = document.querySelector('#modal'),\n  modalOverlay = document.querySelector('#modal-overlay'),\n  closeButton = document.querySelector('#modal__close-button'),\n  openButton = document.querySelector('#open__link');\n\nopenButton.addEventListener('click', function () {\n  modal.style.display = 'inline-block';\n  modalOverlay.style.display = 'inline-block';\n  modal.classList.toggle('closed');\n  modalOverlay.classList.toggle('closed');\n});\ncloseButton.addEventListener('click', function () {\n  modal.style.display = 'none';\n  modalOverlay.style.display = 'none';\n  modal.classList.toggle('closed');\n  modalOverlay.classList.toggle('closed');\n});\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <section class=\\\"details\\\" id=\\\"details\\\">\\n      <button  class=\\\"return-btn \\\" id=\\\"return\\\"> Return</button>\\n      <div class=\\\"details__box\\\">\\n        <img class=\\\"details__image\\\" src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":40},\"end\":{\"line\":4,\"column\":55}}}) : helper)))\n    + \" alt=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":60},\"end\":{\"line\":4,\"column\":69}}}) : helper)))\n    + \" >\\n      </div>\\n      <!-- Блок информации о фильме -->\\n      <div class=\\\"details__main\\\">\\n          <!-- title -->\\n          <h2 class=\\\"details__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":37},\"end\":{\"line\":9,\"column\":46}}}) : helper)))\n    + \"</h2>\\n          <!-- Статистика фильма-->\\n              <table class=\\\"stats\\\">\\n                <tr>\\n                    <!-- заголовок статистики -->\\n                    <td class=\\\"stats__title\\\">Vote / Votes</td>\\n                    <!-- инфа статистики , приходит с сервера-->\\n                    <td class=\\\"stats__info\\\"> <span class=\\\"vote orange\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_average\") || (depth0 != null ? lookupProperty(depth0,\"vote_average\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_average\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":71},\"end\":{\"line\":16,\"column\":87}}}) : helper)))\n    + \"</span>   /   <span class=\\\"vote grey\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_count\") || (depth0 != null ? lookupProperty(depth0,\"vote_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":125},\"end\":{\"line\":16,\"column\":139}}}) : helper)))\n    + \"</span></td>     \\n                </tr>\\n                \\n                <tr>\\n                    <td class=\\\"stats__title\\\">Popularity</td>\\n                    <td class=\\\"stats__info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"popularity\") || (depth0 != null ? lookupProperty(depth0,\"popularity\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"popularity\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":44},\"end\":{\"line\":21,\"column\":58}}}) : helper)))\n    + \"</p>\\n                </tr>                                \\n                <tr>\\n                    <td class=\\\"stats__title\\\">Original Title</td>\\n                    <td class=\\\"stats__info stats__info-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"original_title\") || (depth0 != null ? lookupProperty(depth0,\"original_title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"original_title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":62},\"end\":{\"line\":25,\"column\":80}}}) : helper)))\n    + \"</td>\\n                </tr>                \\n                <tr>\\n                    <td class=\\\"stats__title\\\">Genre</td>\\n                    <td class=\\\"stats__info stats__info-genres\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre\") || (depth0 != null ? lookupProperty(depth0,\"genre\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":63},\"end\":{\"line\":29,\"column\":72}}}) : helper)))\n    + \"</td>\\n                </tr>\\n              </table>\\n        <!-- About -->\\n        <h4 class=\\\"details__about\\\">About</h4>\\n        <!--# overview -->\\n        <p class=\\\"details__overview\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"overview\") || (depth0 != null ? lookupProperty(depth0,\"overview\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"overview\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":35,\"column\":37},\"end\":{\"line\":35,\"column\":49}}}) : helper)))\n    + \"</p>\\n        <div class=\\\"details__control\\\">\\n        <button class=\\\"details__button\\\" id=\\\"watched\\\">Add to watched</button>\\n        <button class=\\\"details__button\\\" id=\\\"queue\\\">Add to queue</button>\\n        </div>\\n      </div>\\n\\n    </section>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<ul class=\\\"slider__list\\\">\\r\\n    <li class=\\\"slider__item\\\"><button class=\\\"slider__btn\\\" data-move=\\\"left\\\"></button></li>\\r\\n    <li class=\\\"slider__item slider__mobile--hidden\\\"><span class=\\\"slider__page-first\\\" id=\\\"slider-page-first\\\"></span></li>\\r\\n    <li class=\\\"slider__item slider__mobile--hidden\\\"><span id=\\\"slider-page-interLeft\\\"></span></li>\\r\\n    <li class=\\\"slider__item\\\"><span class=\\\"slider__page-secondBefore\\\" id=\\\"slider-page-secondBefore\\\"></span></li>\\r\\n    <li class=\\\"slider__item\\\"><span class=\\\"slider__page-firstBefore\\\" id=\\\"slider-page-firstBefore\\\"></span></li>\\r\\n    <li class=\\\"slider__item slider__page-current\\\"><span id=\\\"slider-page-current\\\"></span></li>\\r\\n    <li class=\\\"slider__item\\\"><span class=\\\"slider__page-firstAfter\\\" id=\\\"slider-page-firstAfter\\\"></span></li>\\r\\n    <li class=\\\"slider__item\\\"><span class=\\\"slider__page-secondAfter\\\" id=\\\"slider-page-secondAfter\\\"></span></li>\\r\\n    <li class=\\\"slider__item slider__mobile--hidden\\\"><span id=\\\"slider-page-interRight\\\"></span></li>\\r\\n    <li class=\\\"slider__item slider__mobile--hidden\\\"><span class=\\\"slider__page-last\\\" id=\\\"slider-page-last\\\"></span></li>\\r\\n    <li class=\\\"slider__item\\\"><button class=\\\"slider__btn\\\" data-move=\\\"right\\\"></button></li>\\r\\n</ul>\";\n},\"useData\":true});"],"sourceRoot":""}