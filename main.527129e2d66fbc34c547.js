(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"00et":function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t),n.d(t,"header",(function(){return Y})),n.d(t,"handleMovieClick",(function(){return W})),n.d(t,"getMoviesArray",(function(){return z}));n("lYjL"),n("IvQZ"),n("fp7Y"),n("JBxO"),n("FdtR"),n("4NM0"),n("wcNg"),n("00et");var r=n("oMus"),a=n.n(r),i=n("Snzu"),s=n.n(i),l=n("vB5h"),o=n.n(l);n("8cZI"),n("lmye"),n("x3Br"),n("WB5j"),n("D/wG"),n("Muwe"),n("aZFp");function c(e,t,n,r,a,i,s){try{var l=e[i](s),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){c(i,r,a,s,l,"next",e)}function l(e){c(i,r,a,s,l,"throw",e)}s(void 0)}))}}var d=function(){function e(){this.API_KEY="be244f548a27d8c36fc000d6ba379c12",this.noMatchMessage="Search result not successful. Enter the correct movie name and try again"}var t=e.prototype;return t.getGenres=function(){var e=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/genre/movie/list?api_key=be244f548a27d8c36fc000d6ba379c12&language=en-US",e.next=3,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=be244f548a27d8c36fc000d6ba379c12&language=en-US").then((function(e){return e.json()}));case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getPopular=function(){var e=u(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),n="https://api.themoviedb.org/3/movie/popular?api_key="+this.API_KEY+"&language=en-US&page="+t,e.next=4,fetch(n).then((function(e){return e.json()}));case 4:return r=e.sent,e.abrupt("return",this.getDataObject(r));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getByName=function(){var e=u(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split(" "),r=n.length>1?n.join("+"):n[0],a="https://api.themoviedb.org/3/search/movie?api_key="+this.API_KEY+"&query="+r,e.next=5,fetch(a).then((function(e){return e.json()}));case 5:if(0!==(i=e.sent).results.length){e.next=10;break}return e.abrupt("return",this.noMatchMessage);case 10:return e.abrupt("return",this.getDataObject(i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getDataObject=function(){var e=u(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGenres();case 2:return n=e.sent,r=n.genres,a=t.results.map((function(e){return{poster_path:"https://image.tmdb.org/t/p/w500/"+e.poster_path,title:e.title,genre:e.genre_ids.reduce((function(e,t){var n=r.filter((function(e){return e.id===t}))[0];return e.push(n.name),e.slice(0,3)}),[]),release_year:e.release_date.split("-")[0],vote_average:e.vote_average,overview:e.overview,original_title:e.original_title,popularity:e.popularity,vote_count:e.vote_count,id:e.id}})).filter((function(e){return!e.poster_path.includes("null")})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector("#postersViewer");var f=function(){function e(e){void 0===e&&(e="pageSlider"),this.refs={container:document.querySelector("#"+e)},this._totalPages=null,this.refs.container.addEventListener("click",this.handlePageSlider.bind(this)),this.fetchApi=new d}var t,n,r,a=e.prototype;return a.set=function(e,t){void 0===t&&(t=1),this.totalPages=e,this.show(),this.makeRefs(this.refs.container),this.update(t)},a.handlePageSlider=function(e){switch(e.target.nodeName){case"BUTTON":this.handleBtn(e);break;case"SPAN":this.handlePage(e);break;default:return}},a.handleBtn=function(e){var t=Number(this.refs.current.textContent),n="left"===e.target.dataset.move?t>1?t-1:t:t<this.totalPages?t+1:t;t!==n&&this.update(n)},a.handlePage=function(e){e.target!==this.refs.current&&e.target!==this.refs.interLeft&&e.target!==this.refs.interRight&&this.update(Number(e.target.textContent))},a.show=function(){this.refs.container.innerHTML=o()()},a.hide=function(){this.refs.container.innerHTML=""},a.makeRefs=function(e){this.refs={container:e,viewer:document.querySelector("#postersViewer"),first:e.querySelector("#slider-page-first"),interLeft:e.querySelector("#slider-page-interLeft"),secondBefore:e.querySelector("#slider-page-secondBefore"),firstBefore:e.querySelector("#slider-page-firstBefore"),current:e.querySelector("#slider-page-current"),firstAfter:e.querySelector("#slider-page-firstAfter"),secondAfter:e.querySelector("#slider-page-secondAfter"),interRight:e.querySelector("#slider-page-interRight"),last:e.querySelector("#slider-page-last")}},a.update=function(e){var t=this.totalPages;this.refs.first.textContent=e>3?1:null,this.refs.interLeft.textContent=e>3?"...":null,this.refs.secondBefore.textContent=e>2?e-2:null,this.refs.firstBefore.textContent=e>1?e-1:null,this.refs.current.textContent=e,this.refs.firstAfter.textContent=t-e>0?e+1:null,this.refs.secondAfter.textContent=t-e>1?e+2:null,this.refs.interRight.textContent=t-e>3?"...":null,this.refs.last.textContent=t-e>3?t:null,this.passPageNum(e)},a.passPageNum=function(e){var t=this;this.fetchApi.getPopular(e).then((function(e){t.refs.viewer.innerHTML=s()(e)}))},t=e,(n=[{key:"totalPages",set:function(e){return this._totalPages=e},get:function(){return this._totalPages}}])&&p(t.prototype,n),r&&p(t,r),e}();n("IlJM"),n("uQK7"),n("Xlt+");function h(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Ошибка получения данных из LS: ",e)}}var m=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Ошибка записи в LS: ",e),e==QUOTA_EXCEEDED_ERR&&alert("Превышен лимит")}};function v(e,t){var n=h(e)||[],r=n.find((function(e){return e.poster_path===t.poster_path}));return!!r&&n.indexOf(r)}function g(e,t){var n=h(e)||[];!1!==v(e,t)||(n.push(t),m(e,n))}function _(e,t){var n=v(e,t),r=h(e);r.splice(n,1),localStorage.removeItem(e),m(e,r)}var y=document.querySelector("#postersViewer"),b=new f;function w(e,t,n){var r=a()(e);Y.classList.remove("background-01"),Y.classList.remove("background-02"),Y.classList.add("background-03"),y.innerHTML=r;var i={details:y.querySelector("#details"),watchedBtn:y.querySelector("#watched"),queueBtn:y.querySelector("#queue"),returnBtn:y.querySelector("#return")};!1!==v("watched",e)&&(i.watchedBtn.isActive=!0,i.watchedBtn.classList.add("active"),i.watchedBtn.textContent="Remove from watched"),!1!==v("queue",e)&&(i.queueBtn.isActive=!0,i.queueBtn.classList.add("active"),i.queueBtn.textContent="Remove from queue"),i.details.addEventListener("click",(function(r){if("BUTTON"!==r.target.tagName)return;r.target===i.returnBtn&&(y.innerHTML=t,Y.classList.add("background-01"),Y.classList.remove("background-02"),Y.classList.remove("background-03"),n&&(b.set(20,n),window.scrollTo(top)));if(!r.target.isActive)return void function(t){if(t.target.isActive=!0,t.target.classList.add("active"),t.target===i.watchedBtn)return g("watched",e),void(t.target.textContent="Remove from watched");if(t.target===i.queueBtn)return g("queue",e),void(t.target.textContent="Remove from queue")}(r);if(r.target.isActive)return void function(){if(r.target.isActive=!1,r.target.classList.remove("active"),r.target===i.watchedBtn)return _("watched",e),void(r.target.textContent="Add to watched");if(r.target===i.queueBtn)return _("queue",e),void(r.target.textContent="Add to queue")}()}))}function L(e,t,n,r,a,i,s){try{var l=e[i](s),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){L(i,r,a,s,l,"next",e)}function l(e){L(i,r,a,s,l,"throw",e)}s(void 0)}))}}var k=document.querySelector("#postersViewer");k.addEventListener("click",W);var q=n("9va6"),S=(new d,document.querySelector(".js-error-notification")),B=document.querySelector(".js-home-btn"),P=document.querySelector(".js-library-btn"),A=document.querySelector(".header-btn-container"),E=document.querySelector(".big-input-container"),R=document.querySelector(".js-right-header-btn-container"),j=document.querySelector(".js-left-header-btn-container"),M=document.querySelector(".js-right-header-btn"),C=document.querySelector(".js-left-header-btn"),O=document.querySelector(".logo-writing");function T(){j.classList.add("d-n"),R.classList.remove("d-n");var e=h("watched");k.innerHTML=s()(e),k.addEventListener("click",W.bind(null,!1,"","watched")),k.innerHTML=s()(e)}function N(){P.classList.remove("header-top-orange-btn"),B.classList.add("header-top-orange-btn"),Y.classList.add("background-01"),Y.classList.remove("background-02"),Y.classList.remove("background-03"),E.classList.remove("d-n"),A.classList.add("d-n"),j.classList.add("d-n"),R.classList.add("d-n"),b.set(20),k.addEventListener("click",W)}function H(e){return D.apply(this,arguments)}function D(){return(D=x(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.value)){e.next=8;break}return k.addEventListener("click",W.bind(null,!1,n,"")),e.next=5,z(!1,n);case 5:I(e.sent),t.target.value="";case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){"string"!=typeof e?(b.hide(),k.innerHTML=s()(e),k.removeEventListener("click",W)):S.textContent=e}M.addEventListener("click",(function(){j.classList.remove("d-n"),R.classList.add("d-n");var e=h("queue"),t=h("queue");k.innerHTML=s()(t),k.addEventListener("click",W.bind(null,!1,"","queue")),k.innerHTML=s()(t),k.innerHTML=s()(e)})),C.addEventListener("click",T),B.addEventListener("click",N),O.addEventListener("click",N),P.addEventListener("click",(function(){k.removeEventListener("click",W),B.classList.remove("header-top-orange-btn"),P.classList.add("header-top-orange-btn"),b.hide(),Y.classList.remove("background-01"),Y.classList.add("background-02"),Y.classList.remove("background-03"),E.classList.add("d-n"),A.classList.remove("d-n"),T()}));var V,U;n("gOl8");function J(e,t,n,r,a,i,s){try{var l=e[i](s),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,a)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){J(i,r,a,s,l,"next",e)}function l(e){J(i,r,a,s,l,"throw",e)}s(void 0)}))}}V=document.querySelector(".js-search-field"),U=q.debounce(H,1500),V.addEventListener("input",U),b.set(20);var Y=document.querySelector(".header"),G=document.querySelector("#postersViewer"),K=new d;function W(e){return Z.apply(this,arguments)}function Z(){return(Z=Q(regeneratorRuntime.mark((function e(t,n,r,a){var i,s,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),(!1===t&&"object"==typeof a||!1===t&&("watched"===r||"queue"===r))&&(t=(i=[a,t,n,r])[0],n=i[1],r=i[2],a=i[3]),"DIV"!==t.target.tagName&&"UL"!==t.target.tagName){e.next=4;break}return e.abrupt("return");case 4:if(t.preventDefault(),!t.target.closest("a")){e.next=21;break}if(s=t.target.closest("a").querySelector(".main__item-img").src,a){e.next=13;break}return e.next=10,z(n,r,a);case 10:l=e.sent,e.next=14;break;case 13:"watched"!==a&&"queue"!==a||(l=z(n,r,a));case 14:if(o=l.filter((function(e){return e.poster_path==s}))[0]){e.next=17;break}return e.abrupt("return");case 17:if(!(c=G.innerHTML).includes("details")){e.next=20;break}return e.abrupt("return");case 20:w(o,c);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n){if(void 0===e&&(e=!0),void 0===t&&(t=""),void 0===n&&(n=""),e){var r=Number(b.refs.current.textContent);return K.getPopular(r)}return""!==t?K.getByName(t):""!==n?h(n):null}},Snzu:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,a){var i,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,o="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="main__item">\r\n        <a class="main__item-link" href="#">\r\n            <img class="main__item-img" src="'+c(typeof(i=null!=(i=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?i:l)===o?i.call(s,{name:"poster_path",hash:{},data:a,loc:{start:{line:5,column:45},end:{line:5,column:60}}}):i)+'" alt="'+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===o?i.call(s,{name:"title",hash:{},data:a,loc:{start:{line:5,column:67},end:{line:5,column:76}}}):i)+'" />\r\n            <p class="main__item-title">'+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===o?i.call(s,{name:"title",hash:{},data:a,loc:{start:{line:6,column:40},end:{line:6,column:49}}}):i)+'</p>\r\n            <ul class="main__item-about-list">\r\n                <li class="main__about-item">'+c(typeof(i=null!=(i=u(n,"genre")||(null!=t?u(t,"genre"):t))?i:l)===o?i.call(s,{name:"genre",hash:{},data:a,loc:{start:{line:8,column:45},end:{line:8,column:54}}}):i)+'</li>\r\n                <li class="main__about-item">|</li>\r\n                <li class="main__about-item">'+c(typeof(i=null!=(i=u(n,"release_year")||(null!=t?u(t,"release_year"):t))?i:l)===o?i.call(s,{name:"release_year",hash:{},data:a,loc:{start:{line:10,column:45},end:{line:10,column:61}}}):i)+'</li>\r\n                <li class="main__about-item main__about-vote">'+c(typeof(i=null!=(i=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?i:l)===o?i.call(s,{name:"vote_average",hash:{},data:a,loc:{start:{line:11,column:62},end:{line:11,column:78}}}):i)+"</li>\r\n            </ul>\r\n        </a>\r\n    </li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var i;return'<ul class="main__list">\r\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:4},end:{line:15,column:13}}}))?i:"")+"</ul>"},useData:!0})},gOl8:function(e,t){var n=document.querySelector("#modal"),r=document.querySelector("#modal-overlay"),a=document.querySelector("#modal__close-button");document.querySelector("#open__link").addEventListener("click",(function(){n.style.display="inline-block",r.style.display="inline-block",n.classList.toggle("closed"),r.classList.toggle("closed")})),a.addEventListener("click",(function(){n.style.display="none",r.style.display="none",n.classList.toggle("closed"),r.classList.toggle("closed")}))},oMus:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var i,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,o="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <section class="details" id="details">\n      <button  class="return-btn " id="return"> Return</button>\n      <div class="details__box">\n        <img class="details__image" src='+c(typeof(i=null!=(i=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?i:l)===o?i.call(s,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:40},end:{line:4,column:55}}}):i)+" alt="+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===o?i.call(s,{name:"title",hash:{},data:a,loc:{start:{line:4,column:60},end:{line:4,column:69}}}):i)+' >\n      </div>\n      \x3c!-- Блок информации о фильме --\x3e\n      <div class="details__main">\n          \x3c!-- title --\x3e\n          <h2 class="details__title">'+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===o?i.call(s,{name:"title",hash:{},data:a,loc:{start:{line:9,column:37},end:{line:9,column:46}}}):i)+'</h2>\n          \x3c!-- Статистика фильма--\x3e\n              <table class="stats">\n                <tr>\n                    \x3c!-- заголовок статистики --\x3e\n                    <td class="stats__title">Vote / Votes</td>\n                    \x3c!-- инфа статистики , приходит с сервера--\x3e\n                    <td class="stats__info"> <span class="vote orange">'+c(typeof(i=null!=(i=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?i:l)===o?i.call(s,{name:"vote_average",hash:{},data:a,loc:{start:{line:16,column:71},end:{line:16,column:87}}}):i)+'</span>   /   <span class="vote grey">'+c(typeof(i=null!=(i=u(n,"vote_count")||(null!=t?u(t,"vote_count"):t))?i:l)===o?i.call(s,{name:"vote_count",hash:{},data:a,loc:{start:{line:16,column:125},end:{line:16,column:139}}}):i)+'</span></td>     \n                </tr>\n                \n                <tr>\n                    <td class="stats__title">Popularity</td>\n                    <td class="stats__info">'+c(typeof(i=null!=(i=u(n,"popularity")||(null!=t?u(t,"popularity"):t))?i:l)===o?i.call(s,{name:"popularity",hash:{},data:a,loc:{start:{line:21,column:44},end:{line:21,column:58}}}):i)+'</p>\n                </tr>                                \n                <tr>\n                    <td class="stats__title">Original Title</td>\n                    <td class="stats__info stats__info-title">'+c(typeof(i=null!=(i=u(n,"original_title")||(null!=t?u(t,"original_title"):t))?i:l)===o?i.call(s,{name:"original_title",hash:{},data:a,loc:{start:{line:25,column:62},end:{line:25,column:80}}}):i)+'</td>\n                </tr>                \n                <tr>\n                    <td class="stats__title">Genre</td>\n                    <td class="stats__info stats__info-genres">'+c(typeof(i=null!=(i=u(n,"genre")||(null!=t?u(t,"genre"):t))?i:l)===o?i.call(s,{name:"genre",hash:{},data:a,loc:{start:{line:29,column:63},end:{line:29,column:72}}}):i)+'</td>\n                </tr>\n              </table>\n        \x3c!-- About --\x3e\n        <h4 class="details__about">About</h4>\n        \x3c!--# overview --\x3e\n        <p class="details__overview">'+c(typeof(i=null!=(i=u(n,"overview")||(null!=t?u(t,"overview"):t))?i:l)===o?i.call(s,{name:"overview",hash:{},data:a,loc:{start:{line:35,column:37},end:{line:35,column:49}}}):i)+'</p>\n        <div class="details__control">\n        <button class="details__button" id="watched">Add to watched</button>\n        <button class="details__button" id="queue">Add to queue</button>\n        </div>\n      </div>\n\n    </section>'},useData:!0})},vB5h:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){return'<ul class="slider__list">\r\n    <li class="slider__item"><button class="slider__btn" data-move="left"></button></li>\r\n    <li class="slider__item slider__mobile--hidden"><span class="slider__page-first" id="slider-page-first"></span></li>\r\n    <li class="slider__item slider__mobile--hidden"><span id="slider-page-interLeft"></span></li>\r\n    <li class="slider__item"><span class="slider__page-secondBefore" id="slider-page-secondBefore"></span></li>\r\n    <li class="slider__item"><span class="slider__page-firstBefore" id="slider-page-firstBefore"></span></li>\r\n    <li class="slider__item slider__page-current"><span id="slider-page-current"></span></li>\r\n    <li class="slider__item"><span class="slider__page-firstAfter" id="slider-page-firstAfter"></span></li>\r\n    <li class="slider__item"><span class="slider__page-secondAfter" id="slider-page-secondAfter"></span></li>\r\n    <li class="slider__item slider__mobile--hidden"><span id="slider-page-interRight"></span></li>\r\n    <li class="slider__item slider__mobile--hidden"><span class="slider__page-last" id="slider-page-last"></span></li>\r\n    <li class="slider__item"><button class="slider__btn" data-move="right"></button></li>\r\n</ul>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.527129e2d66fbc34c547.js.map